<!DOCTYPE html>
<html lang="en">

<%-include('./layouts/header')%>

    <body id="page-top">

        <!-- Page Wrapper -->
        <div id="wrapper">

            <!-- Sidebar -->
            <%-include('./layouts/sidebar')%>
                <!-- End of Sidebar -->

                <!-- Content Wrapper -->
                <div id="content-wrapper" class="d-flex flex-column">

                    <!-- Main Content -->
                    <div id="content">

                        <!-- Topbar -->
                        <%-include('./layouts/topbar')%>
                            <!-- End of Topbar -->

                            <!-- Begin Page Content -->
                            <div class="container-fluid">

                                <!-- Page Heading -->
                                <div class="d-sm-flex align-items-center justify-content-between mb-4">
                                    <h1 class="h3 mb-0 text-gray-800">Edit Pet Details</h1>
                                </div>

                                <!-- Flash Message -->
                                <% if (message && message.length> 0) { %>
                                    <div class="alert alert-info">
                                        <%= message %>
                                    </div>
                                    <% } %>

  <form action="/admin/pets/edit/<%= pet._id %>" method="POST" enctype="multipart/form-data">
    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Pet Name</label>
        <input type="text" name="name" value="<%= pet.name %>" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">Species</label>
        <input type="text" name="species" value="<%= pet.species %>" class="form-control" required>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Breed</label>
        <input type="text" name="breed" value="<%= pet.breed %>" class="form-control">
      </div>
      <div class="col-md-3">
        <label class="form-label">Age</label>
        <input type="number" name="age" value="<%= pet.age %>" class="form-control">
      </div>
      <div class="col-md-3">
        <label class="form-label">Gender</label>
        <select name="gender" class="form-control">
          <option value="Male" <%= pet.gender === 'Male' ? 'selected' : '' %>>Male</option>
          <option value="Female" <%= pet.gender === 'Female' ? 'selected' : '' %>>Female</option>
        </select>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Description</label>
      <textarea name="description" class="form-control" rows="3"><%= pet.description %></textarea>
    </div>

    <div class="row mb-3">
      <div class="col-md-4">
        <label class="form-label">Status</label>
        <select name="status" class="form-control">
          <option value="available" <%= pet.status === 'available' ? 'selected' : '' %>>Available</option>
          <option value="adopted" <%= pet.status === 'adopted' ? 'selected' : '' %>>Adopted</option>
        </select>
      </div>

      <div class="col-md-8">
        <label class="form-label">Shelter</label>
        <select name="shelterId" class="form-control">
          <% shelters.forEach(s => { %>
            <option value="<%= s._id %>" <%= s._id.toString() === pet.shelterId.toString() ? 'selected' : '' %>><%= s.name %></option>
          <% }) %>
        </select>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Current Image</label><br>
      <% if (pet.image) { %>
        <img src="<%= pet.image %>" alt="Pet Image" width="100" class="rounded shadow">
      <% } else { %>
        <p>No image uploaded</p>
      <% } %>
    </div>

    <div class="mb-3">
      <label class="form-label">Change Image</label>
      <input type="file" name="image" class="form-control">
    </div>

    <button type="submit" class="btn btn-success">Update Pet</button>
    <a href="/admin/pets" class="btn btn-secondary">Cancel</a>
  </form>

                            </div>
                            <!-- /.container-fluid -->

                    </div>
                    <!-- End of Main Content -->

                    <!-- Footer -->
                    <%-include('./layouts/footer')%>
    </body>

</html>